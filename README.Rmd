---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, echo = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-"
)
```

# copertura

The goal of copertura is to make it easy to solve the Maximal Location Coverage Problem. Currently it uses the `lp` solver from the `lpsolve` package.

# Why copertura?

It is named "copertura" as this means "coverage" in Italian, and the research problem that created the need for this package is in Ticino, the Italian speaking canton of Switzerland.

# How to Install

```{r install, eval = FALSE}

# install.packages("devtools")
devtools::install_github("njtierney/copertura")

```

## Example Usage

```{r}

library(copertura)

# generate the A matrix with a function

rand_A <- function(I, J){
    
    rand_vec <- sample(c(0,1),
                       size = I,
                       replace = TRUE)
    
    A <- matrix(rep(rand_vec, J),
                nrow = J)
    
    return(A) 
}

my_A <- rand_A(I = 100, # 100 locations
               J = 20) # 20 cases

# top corner
my_A[1:5,1:5]

# bottom corner
my_A[16:20,96:100]

my_soln <- max_coverage(A = my_A,
                        num_aed = 5) # five AEDs
# print the solution.
my_soln$solution

```



# Speed

When A is 20 rows and 100 columns

```{r cache = TRUE}

my_A <- rand_A(I = 100, # 100 locations
               J = 20) # 20 cases

system.time(
max_coverage(A = my_A,
             num_aed = 5) # five AEDs
)

```

When A is 200 rows and 1,000 columns

```{r}

my_A <- rand_A(I = 1000, # 1000 locations
               J = 200) # 200 cases

system.time(
max_coverage(A = my_A,
             num_aed = 5) # five AEDs
)

```

When A is 2,000 rows and 10,000 columns

```{r}
my_A <- rand_A(I = 10000, # 10000 locations
               J = 2000) # 2000 cases

system.time(
max_coverage(A = my_A,
             num_aed = 5) # five AEDs
)

```

When A is 2,500 rows and 10,000 columns

```{r}
my_A <- rand_A(I = 10000, # 10000 locations
               J = 2500) # 2000 cases

system.time(
max_coverage(A = my_A,
             num_aed = 5) # five AEDs
)

```

When A is 2,600 rows and 10,000 columns

```{r}
my_A <- rand_A(I = 10000, # 10000 locations
               J = 2600) # 2000 cases

system.time(
max_coverage(A = my_A,
             num_aed = 5) # five AEDs
)

```


# Known Issues

At this point the package is in a prototype stage, and does not scale super well. There may also be identified bugs, please keep this in mind!

# Future Work

In the future we will include a set of functions to allow the user to keep their work within a dataframe and specify the potential locations and the cases that require coverage.

